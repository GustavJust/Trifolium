---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/hero.astro";
import ExplanationSection from "../components/map_explanation.astro";
import NavCard from "../components/nav_card.astro";

const theme = "facilities";
---

<Layout theme={theme}>
  <Hero
    video="/assets/imgs/video/platform_office_video.mp4"
    title="Facilities"
    description="Across 5,000+ m², we offer seven fully equipped workshops, office spaces, meeting and event facilities, a photo studio, a mobile container workshop, team-building activities, and more — all with flexible terms."
    poster="/assets/imgs/lazyload/facilities_lazyload.webp"
  />
  <section>
    <h2>Explore our facilities</h2>
    <nav class="nav_card_container">
      <NavCard
        href="/offices"
        title="Offices"
        imgSrc="/assets/imgs/offices_intro.webp"
        alt="Office facilities section"
        aria-hidden="true"
      />
      <NavCard
        href="/photostudio"
        title="Photo-studio"
        imgSrc="/assets/imgs/lazyload/photostudio_lazyload.webp"
        alt="Photostudio facilities section"
        aria-hidden="true"
      />
      <NavCard
        href="/workshops"
        title="Workshops"
        imgSrc="/assets/imgs/wrk_realwork.webp"
        alt="Workshops facilities section"
        aria-hidden="true"
      />
      <NavCard
        href="/venues"
        title="Venues"
        imgSrc="/assets/imgs/lazyload/venues_lazyload.webp"
        alt="Venues facilities section"
        aria-hidden="true"
      />
    </nav>
  </section>

  <div class="logo_divider">
    <img
      src="../assets/imgs/logo_icon.svg"
      alt="Section divider"
      aria-hidden="true"
    />
  </div>

  <section class="txt_only">
    <h2>
      We’re a strong, cross-disciplinary community built for professional
      production.
    </h2>
    <p>
      With workspaces, advanced tools, and workshops under one roof, you can
      create physical or digital products from concept to launch.
    </p>
  </section>

  <div class="logo_divider">
    <img
      src="../assets/imgs/logo_icon.svg"
      alt="Section divider"
      aria-hidden="true"
    />
  </div>

  <section class="img_w_txt_map">
    <div class="map_container">
      <div class="floor_select">
        <p>Select Floor</p>
        <button class="floor_btn" data-floor="0">1</button>
        <button class="floor_btn" data-floor="1">2</button>
        <button class="floor_btn" data-floor="2">3</button>
      </div>

      <div class="map_frame" id="mapFrame">
        <div class="floor_wrapper">
          <img
            src="/assets/imgs/floor_one_map.svg"
            alt="Floor 1"
            class="floor_img"
          />
          <button class="map_area_btn wood" data-section="wood">Wood</button>
          <button class="map_area_btn metal" data-section="metal">Metal</button>
          <button class="map_area_btn storage" data-section="storage"
            >Storage</button
          >
          <button class="map_area_btn blue" data-section="blue"
            >Blue Area</button
          >
          <button class="map_area_btn event" data-section="venue">Venues</button
          >
          <button class="map_area_btn closed_1fl" data-section="satellite"
            >Satellite</button
          >
        </div>
        <div class="floor_wrapper">
          <img
            src="/assets/imgs/floor_two_map.svg"
            alt="Floor 2"
            class="floor_img"
          />
          <button class="map_area_btn model" data-section="model">Model</button>
          <button class="map_area_btn alu" data-section="alu">Alu</button>
          <button class="map_area_btn madmen" data-section="madmen"
            >Office Hallway</button
          >
          <button class="map_area_btn village" data-section="village"
            >Studio Village</button
          >
          <button class="map_area_btn grey" data-section="grey"
            >Grey Hall</button
          >
          <button class="map_area_btn photo" data-section="photo">Photo</button>
          <button class="map_area_btn event_2fl" data-section="venue"
            >Venues</button
          >
        </div>
        <div class="floor_wrapper">
          <img
            src="/assets/imgs/floor_three_map.svg"
            alt="Floor 3"
            class="floor_img"
          />
          <button class="map_area_btn grey_fl2" data-section="grey_offices"
            >Grey Hall Offices</button
          >
          <button class="map_area_btn photo_com_fl2" data-section="photo_com"
            >Photo</button
          >
        </div>
      </div>
    </div>

    <div class="explanation txt_box">
      <ExplanationSection
        sectionId="wood"
        title="Wood workshop"
        imageSrc="/assets/imgs/wrk_wood1.webp"
        captionLeft="wood workshop"
        captionRight="1st floor"
        description="Our wood workshop is one of the central hubs of Trifolium. It’s set up to support everything from precision joinery and furniture to fast prototyping and custom installations."
        readMoreHref="/workshops#wood"
        galleryImages={[
          "/assets/imgs/wrk_wood2.webp",
          "/assets/imgs/wrk_wood3.webp",
          "/assets/imgs/wrk_wood4.webp",
        ]}
      />

      <ExplanationSection
        sectionId="metal"
        title="Metal workshop"
        imageSrc="/assets/imgs/wrk_metal1.webp"
        captionLeft="metal workshop"
        captionRight="1st floor"
        description="The metal workshop is where structure, function, and fire come together. This space supports welding, cutting, bending, and light-to-medium fabrication work across various metals."
        readMoreHref="/workshops#metal"
        galleryImages={[
          "/assets/imgs/wrk_metal2.webp",
          "/assets/imgs/wrk_metal3.webp",
          "/assets/imgs/wrk_metal4.webp",
        ]}
      />

      <ExplanationSection
        sectionId="storage"
        title="Storage"
        imageSrc="/assets/imgs/wrk_storage.webp"
        captionLeft="Storage floor"
        captionRight="1st floor"
        description="Need space to store your materials or ongoing work? We offer shelf storage and floor space at monthly rates, priced by the square meter. Whether you need a small spot or a bigger footprint, you can keep your tools and projects close by and ready to go."
      />

      <ExplanationSection
        sectionId="blue"
        title="Blue area"
        imageSrc="/assets/imgs/offices_flex5.webp"
        captionLeft="Blue area"
        captionRight="1st floor"
        description="The central common space for Trifolium. This is where we gather for lunch, social activities, members meetings, Coffee and so on. It also contains flex desks and spaces for all members to use regardless of membership. Here you will find the canteena, meeting rooms, kitchenette, games, and hangout spots."
        readMoreHref="/workshops#wood"
        galleryImages={[
          "/assets/imgs/lazyload/membership_lazyload.webp",
          "/assets/imgs/index_bluearea.webp",
          "/assets/imgs/lazyload_members_lazyload.webp",
        ]}
      />

      <ExplanationSection
        sectionId="venue"
        title="Venues"
        imageSrc="/assets/imgs/lazyload/venues_lazyload.webp"
        captionLeft="Event space"
        captionRight="1st / 2nd floor"
        description="Trifolium offers flexible spaces for events, conferences, and private gatherings. Available for day rentals, the venues are equipped with essentials like club-grade speakers, screens, private toilets, and a small kitchen for serving or plating food. <br><br>We can adapt the setup with chairs, tables, or benches to fit your needs. <br><br>Two adjacent terraces add a cozy outdoor option, complete with seating, lighting, parasols, and heat lamps."
        readMoreHref="/workshops#wood"
        galleryImages={[
          "/assets/imgs/kedelrummet.webp",
          "/assets/imgs/kedelrummet10.webp",
          "/assets/imgs/klubben12.webp",
          "/assets/imgs/klubben14.webp",
          "/assets/imgs/klubben1.webp",
          "/assets/imgs/klubben9.webp",
          "/assets/imgs/klubben10.webp",
          "/assets/imgs/kirken3.webp",
        ]}
      />

      <ExplanationSection
        sectionId="satellite"
        title="Satellite"
        imageSrc="/assets/imgs/satellite_thumb.webp"
        captionLeft="Satellite offices"
        captionRight="1st floor 44A"
        description="Located in the south wing of the building, Trifolium’s satellite offices offer a more private and focused work environment compared to the rest of the house. <br> <br> Newly renovated and ideal for small teams or solo professionals, the space includes access to a shared meeting room and a small kitchenette. It’s a calm, self-contained corner of Trifolium for those who prefer a quieter setup, without missing out on the benefits of the larger community."
        galleryImages={[
          "/assets/imgs/satellite1.webp",
          "/assets/imgs/satellite2.webp",
          "/assets/imgs/satellite3.webp",
          "/assets/imgs/satellite4.webp",
          "/assets/imgs/satellite5.webp",
        ]}
      />

      <ExplanationSection
        sectionId="model"
        title="Model Workshop"
        imageSrc="/assets/imgs/wrk_model1.webp"
        captionLeft="model workshop workshop"
        captionRight="Mezzanine"
        description="The model workshop is where ideas get tested, scaled, and shaped by hand. It’s set up for architectural models, material mockups, detailed prototypes, or anything in between.<br /><br />This is a quieter, more controlled space for professionals who work at smaller scales or need a clean environment for delicate processes."
        readMoreHref="/workshops#wood"
        galleryImages={[
          "/assets/imgs/wrk_model2.webp",
          "/assets/imgs/wrk_model3.webp",
          "/assets/imgs/wrk_model4.webp",
        ]}
      />

      <ExplanationSection
        sectionId="alu"
        title="Alu Kitchen"
        imageSrc="/assets/imgs/alu_thumb.webp"
        captionLeft="Alu kitchen"
        captionRight="mezzanine"
        description="Situated next to the model workshops, the Alu Kitchen is a fully equipped break space and cooking area for all members.<br><br> Designed for practical use, the kitchen includes an oven, induction stovetop, microwave, shared fridge, and storage for dry and canned goods. Whether you’re making breakfast, lunch, or dinner, you're free to use the space as needed throughout the day."
      />

      <ExplanationSection
        sectionId="madmen"
        title="Office Hallway"
        imageSrc="/assets/imgs/offices_intro.webp"
        captionLeft="Office hallway"
        captionRight="2nd floor"
        description="Our private office spaces are ideal for teams who need a quieter, more contained setting. These rooms accommodate 4 to 6 people and are located in a calm hallway separate from the open studio area. They offer a professional, low-distraction environment with the benefits of being part of a larger, creative workspace just outside the door."
        readMoreHref="/offices#closed"
        galleryImages={[
          "/assets/imgs/offices_closed1.webp",
          "/assets/imgs/offices_closed2.webp",
          "/assets/imgs/offices_closed3.webp",
          "/assets/imgs/offices_closed4.webp",
        ]}
      />

      <ExplanationSection
        sectionId="village"
        title="Studio Village"
        imageSrc="/assets/imgs/village1.webp"
        captionLeft="Platforms"
        captionRight="2nd floor"
        description="At the heart of Trifolium lies the Studio Village: a shared, open-plan workspace that brings energy and accessibility together.<br><br> Here you’ll find both private desks and flex options, all situated within easy reach of workshops, meeting rooms, and shared facilities. It’s a lively, collaborative environment built for professionals who want to stay close to the action."
        galleryImages={[
          "/assets/imgs/village2.webp",
          "/assets/imgs/village3.webp",
          "/assets/imgs/village1.webp",
        ]}
      />

      <ExplanationSection
        sectionId="grey"
        title="Grey Hall"
        imageSrc="/assets/imgs/grey_area_thumb.webp"
        captionLeft="Grey hall"
        captionRight="2nd floor"
        description="Though still partially under renovation, the Grey Hall has already become a vital part of daily life at Trifolium.<br><br> The space hosts several meeting rooms of varying sizes, all equipped with screens and whiteboards. You’ll also find our evolving exhibition area here, where members showcase their projects and products.<br><br> With its large open floor and flexible layout, the Grey Hall is home to events like Trifolium’s Impact Mornings and serves as a venue for talks, presentations, and conferences."
        galleryImages={[
          "/assets/imgs/grey_area1.webp",
          "/assets/imgs/grey_area2.webp",
          "/assets/imgs/grey_area3.webp",
          "/assets/imgs/grey_area4.webp",
          "/assets/imgs/grey_area5.webp",
        ]}
      />

      <ExplanationSection
        sectionId="photo"
        title="Photo-Studio"
        imageSrc="/assets/imgs/lazyload/photostudio_lazyload.webp"
        captionLeft="Photo-studio"
        captionRight="2nd floor"
        description="Trifolium’s photostudio is a 200 m² flexible space for professional photo and video work. With white walls, blackout options, and basic gear available, it’s ideal for everything from portraits to large product shoots. <br><br> Next door, our photo community shares a small office and brings expertise, collaboration, and creative energy into the space. <br><br> The studio is bookable for both members and externals. Contact us for details."
        readMoreHref="/photostudio"
        galleryImages={[
          "/assets/imgs/photostudio_backview.webp",
          "/assets/imgs/photostudio_intro.webp",
          "/assets/imgs/photostudio_kitchen.webp",
          "/assets/imgs/photostudio_lounge.webp",
          "/assets/imgs/photostudio_makeup.webp",
          "/assets/imgs/photostudio_outside.webp",
        ]}
      />

      <ExplanationSection
        sectionId="grey_offices"
        title="Grey hall offices"
        imageSrc="/assets/imgs/grey_offices_thumb.webp"
        captionLeft="Grey hall"
        captionRight="3rd floor"
        description="The Grey Area Platforms offer a semi-open workspace setup, similar to the Studio Village, but with a more focused atmosphere. Located closer to the offices and photostudio, these platforms provide easy access to core facilities while offering a quieter, more private vibe. <br><br>Each platform features closed-off office units on the top level, ideal for teams who need privacy and concentration. With a modern interior and large roof windows, the space is filled with natural daylight and offers an impressive view over the Sydhavn skyline."
        galleryImages={[
          "/assets/imgs/grey_offices1.webp",
          "/assets/imgs/grey_offices2.webp",
          "/assets/imgs/grey_offices3.webp",
        ]}
      />

      <ExplanationSection
        sectionId="photo_com"
        title="Photo community"
        imageSrc="/assets/imgs/poto_com3.webp"
        captionLeft="Photo offices"
        captionRight="2nd floor"
        description="A dedicated photo membership gives you full access to the photostudio, including use of the booking calendar, plus a personal desk in our micro photo and video community. <br><br> It’s a space shared by professional photographers, videographers, and content creators, offering both focused workstations and the chance to connect with like-minded creatives."
        galleryImages={[
          "/assets/imgs/poto_com2.webp",
          "/assets/imgs/poto_com4.webp",
        ]}
      />
    </div>
  </section>
  <div class="logo_divider">
    <img
      src="../assets/imgs/logo_icon.svg"
      alt="Section divider"
      aria-hidden="true"
    />
  </div>

  <section class="bottom_cta">
    <h2>Explore our memberships</h2>
    <p>
      We are a flexible, membership-based coworking community where you can
      create in the moment, learn from others, and enjoy a good work life
      alongside like-minded people. Trifolium offers complete freedom with
      responsibility within a structured framework.
    </p>
    <a href="/facilities" class="button large">Explore memberships</a>
  </section>
  <div class="logo_divider">
    <img
      src="../assets/imgs/logo_icon.svg"
      alt="Section divider"
      aria-hidden="true"
    />
  </div>
</Layout>
<script is:inline>
  window.addEventListener("DOMContentLoaded", () => {
    const floorButtons = document.querySelectorAll(".floor_btn");
    const floorWrappers = document.querySelectorAll(".floor_wrapper");

    function setActiveFloor(index) {
      floorWrappers.forEach((wrapper, i) => {
        wrapper.style.display = i === index ? "block" : "none";
      });
    }

    floorButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const index = parseInt(btn.getAttribute("data-floor"), 10);
        if (!isNaN(index)) setActiveFloor(index);
      });
    });

    setActiveFloor(0);

    const sectionButtons = document.querySelectorAll(".map_area_btn");
    const sections = document.querySelectorAll(".explanation-section");

    function showSection(sectionId) {
      sections.forEach((section) => {
        section.style.display =
          section.dataset.section === sectionId ? "block" : "none";
      });
    }

    sectionButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const sectionId = btn.dataset.section;
        if (sectionId) showSection(sectionId);
      });
    });

    const first = sections[0];
    if (first) showSection(first.dataset.section);
  });
</script>

<style>
  h2 {
    margin-top: var(--spacing-small);
    margin-bottom: var(--spacing-small);
  }
  section:not(.hero) {
    margin-left: var(--spacing-small);
    margin-right: var(--spacing-small);
  }

  .map_container {
    margin-top: var(--spacing-medium);
  }

  .floor_select {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--spacing-small);
    margin-bottom: var(--spacing-small);
  }

  .floor_btn {
    background-color: var(--color-white-100);
    border: 1px solid var(--primary-color-500);
    border-radius: 999px;
    width: 40px;
    height: 40px;
    font-weight: 700;
    font-size: 1.5em;
    cursor: pointer;
    z-index: 999;
    color: black;
  }

  .floor_btn:hover {
    background-color: var(--primary-color-300);
    color: white;
  }

  .floor_btn:active {
    background-color: var(--primary-color-500);
    color: white;
  }

  .map_frame {
    width: 100%;
    display: grid;
    grid-template-columns: 1fr;
    position: relative;
  }

  .floor_wrapper {
    position: relative;
    display: none;
  }

  .floor_img {
    width: 100%;
    display: block;
    transform: scale(1.2);
  }

  .map_area_btn {
    position: absolute;
    z-index: 10;
    font-size: 1.2rem;
    border: none;
    background: var(--color-white-100);
    cursor: pointer;
    font-weight: 600;
  }

  .map_area_btn > div {
    background-color: rgba(0, 156, 255, 0.8);
    width: fit-content;
    justify-self: center;
    padding: 2px 4px;
    border: 1px solid var(--primary-color-500);
  }

  .map_area_btn:hover,
  .map_area_btn:focus {
    background-color: var(--secondary-color-500);
  }

  .map_area_btn:hover > div,
  .map_area_btn:focus > div {
    background-color: var(--secondary-color-500);
    border: transparent;
    color: var(--color-white-100);
  }

  .map_area_btn.wood {
    width: 31%;
    height: 13.4%;
    top: 14.3%;
    left: 20.7%;
  }

  .map_area_btn.metal {
    width: 15.7%;
    height: 11.5%;
    top: 27.7%;
    left: 20.7%;
  }

  .map_area_btn.storage {
    width: 46.1%;
    height: 11.5%;
    top: 27.7%;
    left: 36.4%;
  }

  .map_area_btn.blue {
    width: 11.48%;
    height: 32.5%;
    top: 27.7%;
    left: 82.5%;
  }

  .map_area_btn.event {
    width: 23%;
    height: 7.8%;
    top: 85%;
    left: 36.4%;
  }

  .map_area_btn.closed_1fl {
    width: 23.3%;
    height: 7.8%;
    top: 85%;
    left: 59.3%;
  }

  .map_area_btn.model {
    width: 15.7%;
    height: 11.5%;
    top: 14.25%;
    left: 36.1%;
  }

  .map_area_btn.alu {
    width: 7.5%;
    height: 5.7%;
    top: 14.25%;
    left: 51.8%;
  }

  .map_area_btn.madmen {
    width: 11.48%;
    height: 55.1%;
    top: 13%;
    left: 82.6%;
  }

  .map_area_btn.village {
    width: 46.5%;
    height: 10.8%;
    top: 27.5%;
    left: 36.1%;
  }

  .map_area_btn.grey {
    width: 46.5%;
    height: 14.2%;
    top: 38.2%;
    left: 36.1%;
  }

  .map_area_btn.photo {
    width: 23.2%;
    height: 6.35%;
    top: 53.8%;
    left: 59.4%;
  }

  .map_area_btn.photo_com {
    width: 7.8%;
    height: 6.35%;
    top: 53.8%;
    left: 74.8%;
  }

  .map_area_btn.event_2fl {
    width: 18.4%;
    height: 7.8%;
    top: 85%;
    left: 36.5%;
  }

  .map_area_btn.grey_fl2 {
    width: 45.8%;
    height: 12%;
    top: 40.2%;
    left: 36.7%;
  }

  .map_area_btn.photo_com_fl2 {
    width: 7.8%;
    height: 6.38%;
    top: 53.3%;
    left: 74.8%;
  }

  .explanation {
    margin-top: var(--spacing-medium);
  }

  .explanation-section.hidden {
    display: none;
  }

  .hor_card {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-tiny);
  }

  .hor_card > a {
    display: flex;
    justify-content: space-between;
    border: 1px solid var(--primary-color-500);
    font-weight: 700;
    font-size: 35.2px;
    padding: 8px;
  }

  .hor_card a p,
  .hor_card a img {
    margin: 0;
  }

  .hor_card > a:hover {
    background-color: var(--primary-color-200);
  }

  .hor_card > a:active {
    background-color: var(--primary-color-500);
    color: white;
  }

  .hor_card > a img {
    transition: 0.05s ease-in;
  }

  .hor_card > a:hover img {
    rotate: 45deg;
  }

  @media (width < 800px) {
    .map_area_btn > div {
      font-size: 0.8em;
    }
  }

  @media (width > 800px) {
    .hor_card {
      flex-direction: row;
      width: 100%;
    }

    .hor_card a {
      width: 100%;
    }

    .txt_only p {
      margin-top: 10px;
    }
  }
</style>
